---
title: "DAO：治理、金库与协同实践"
date: 2023-03-22
categories: [Web3]
tags: [DAO, 治理, 多签, Snapshot]
---

DAO（Decentralized Autonomous Organization）强调“公开规则 + 透明资产 + 社区协作”。要把 DAO 从“概念”落地为可持续运作的“组织”，需要同时构建规则（合约/章程）、流程（提案/投票/执行）、工具（多签/投票/论坛/工单）与度量（金库/参与度/交付）。本文从治理模型到金库运营、从合约到日常协同，给出可直接落地的实践手册与脚本示例。

## 1. 治理模型概览
- Token-based：一币一票，参与门槛低但易受“鲸鱼”影响；
- Delegated（委托制）：将投票权委托给代表，兼顾广泛参与与专业决策；
- 二次方投票（Quadratic）：缓解大户垄断影响，但需反女巫措施；
- 基于声誉/贡献积分：非金融化权重，强调长期贡献；
- 混合模型：不同领域/金额使用不同门槛与投票机制（如技术提案 vs. 市场预算）。

## 2. 提案生命周期（从草案到执行）
1) 草案（RFC）：论坛/Discord 讨论，明确动机、方案、预算、风险；
2) 影子投票/温度测试（Snapshot 温度计）：收集倾向；
3) 正式提案（SIP/DAOIP 等）：链上/链下同步发布；
4) 投票：Snapshot（off-chain）或 Governor（on-chain）；
5) 执行：多签 Safe 模块/Timelock 合约触发链上动作；
6) 复盘：记录影响、里程碑达成情况、后续跟踪 KPI。

### 2.1 模板（提案正文）
- 摘要：一句话说明；
- 动机与目标：解决什么问题；
- 方案与里程碑：阶段、交付物、完成标准；
- 预算：金额、释放节奏、验收条件；
- 风险与替代方案：关键假设与兜底；
- 法务与合规：需要注意的限制；
- 执行方式：多签/合约接口/可验证凭证；
- 监控指标：成功/失败的量化定义。

## 3. 投票与执行：Snapshot + Safe
- Snapshot（off-chain）：使用签名（EIP-712）完成不可抵赖投票，低成本；
- Safe 多签（Gnosis）：金库与执行器，支持模块化扩展；
- 自动执行：Snapshot 的 SafeSnap 模块可将投票结果自动化为多签交易批次；
- 门槛设置：法定人数（quorum）、通过阈值、投票时长；
- 防作弊：反女巫、投票权截快照、委托机制。

配置片段（Snapshot space）：
```json
{
  "name": "Example DAO",
  "strategies": [{"name":"erc20-balance-of","params":{"address":"0xToken","symbol":"TKN","decimals":18}}],
  "quorum": 0.1, "voteDuration": 5
}
```

## 4. 链上治理：OpenZeppelin Governor/Timelock
- Governor Bravo / OZ Governor：支持法定人数、投票/延时/执行窗口；
- Timelock：为关键变更设置最短延时（如 24~72 小时），保证公众可审阅；
- 模块化：可组合多策略读权重（ERC20、NFT、声誉积分）。

部署要点（Foundry 伪代码）：
```solidity
Governor g = new Governor("DAO", token, quorum, votingDelay, votingPeriod);
Timelock t = new Timelock(minDelay, proposers, executors);
g.setTimelock(address(t));
```

## 5. 金库与预算管理
- 收入：协议费/捐赠/资助；
- 支出：运营/研发/社区激励/生态合作；
- 预算流程：提案 → 执行里程碑释放 → 结项复盘；
- 资产配置：稳定币 vs 原生代币，风险敞口与对冲；
- 支付工具：多签批量支付、流式支付（Sablier/Stream），可回收未完成预算。

多签批量交易（Safe API/脚本）：
```js
// 组装批量转账与合约调用，提交到 Safe 服务，收集签名后上链执行
```

## 6. 角色、工组与激励
- 角色：理事会（多签签署人）、运营（主持流程）、审计（风险/合规）、贡献者；
- 工组（Working Group）：按照领域划分（协议、市场、内容、数据）；
- 激励：按里程碑支付 + 绩效加权；
- 声誉系统：非金融化的贡献度积分，与资金激励分离；
- 透明度：公开任务看板/排期/预算消耗。

## 7. 法务与风险
- 法人格：基金会/非营利组织/公司壳；
- 合规：税务、KYC/AML、地区限制；
- 知识产权：内容与品牌使用授权；
- 保险/代偿：关键风险（跨链桥、金库）购买保险或建立风险准备金；
- 紧急权限：仅限暂停关键合约/支出，必须有时效与审计日志。

## 8. 运营度量与工具栈
- 指标：提案数、参与率、委托覆盖率、预算执行率、交付完成率；
- 金库仪表：资产构成、资金流出入、 runway；
- 安全告警：异常转账、权限变更、合约事件；
- 工具：
  - 协同：Discourse/Notion/GitHub Projects/Discord；
  - 治理：Snapshot、Tally、Boardroom、Charmverse；
  - 金库：Safe、Llama、Sablier；
  - 数据：Dune、Flipside、自建 ETL。

## 9. 应急与回滚演练
- 触发条件：关键 KPI 恶化（参与率骤降/预算滥用/安全事件）；
- 行动：临时冻结非关键支出 → 召开紧急会议 → 提案通过后执行回滚或更换模块；
- 演练：季度进行“带压回滚/金库紧急冻结/密钥更换”演练；
- 日志：所有应急动作记录在案（链上事件 + 协作平台日志）。

## 10. 案例（示意）
- 目标：为协议升级与市场推广申请 50 万 USDC；
- 流程：
  1) RFC 收集需求与 KPI；
  2) Snapshot 温度计投票，>60% 支持进入正式投票；
  3) 正式投票通过 → Safe 批量交易分期付款；
  4) 里程碑验收：GitHub Release / 合约已上线 / 监控指标达到阈值；
  5) 复盘发布与预算结项，未用资金退回金库。

## 11. 小结
DAO 的难点不是“投票按钮”，而在于“透明、可持续的组织工程”：规则清晰、角色分明、流程可审计、资金可追踪、风险可控。以 Snapshot + Safe + Governor 为核心治理栈，配合度量与演练，DAO 才能在开放环境中长期稳定运转。
