---
layout: default
---



<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  {%- comment -%} 移除冗余顶层包含，统一使用 header 中的面包屑或下方的精简导航 {%- endcomment -%}

  <header class="post-header">
    <h1>{{ page.title }}</h1>
    <p class="post-meta">
      <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%Y-%m-%d" }}</time>
      {% if page.last_modified_at %} · 最后更新于 <time datetime="{{ page.last_modified_at | date_to_xmlschema }}">{{
        page.last_modified_at | date: "%Y-%m-%d" }}</time>{% endif %}
      {% if page.categories %} · {{ page.categories | join: ' / ' }}{% endif %}
      {% if page.tags %} · {{ page.tags | join: ', ' }}{% endif %}
      <span id="busuanzi_container_page_pv" style="display: none;">
        ·
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          style="vertical-align: text-bottom; display: inline-block;">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        <span id="busuanzi_value_page_pv"></span>
      </span>
    </p>
    <nav class="breadcrumbs" aria-label="Breadcrumb">
      <a href="{{ '/' | relative_url }}">首页</a>
      {% if page.categories and page.categories.size > 0 %}
      {% for c in page.categories %}
      &nbsp;/&nbsp;<a href="{{ '/categories/' | relative_url }}">{{ c }}</a>
      {% endfor %}
      {% endif %}
      &nbsp;/&nbsp;<span aria-current="page">{{ page.title }}</span>
    </nav>

  </header>

  <div class="post-body" id="post-body">
    <aside id="toc" class="glass-effect"></aside>
    <div id="post-content">
      {{ content | replace: '<img', '<img loading="lazy"' }} </div>
    </div>

    {% comment %} 相关阅读（按同标签/分类匹配，最多 5 篇） {% endcomment %}
    {% assign related = '' | split: '|' %}
    {% for p in site.posts %}
    {% if p.url == page.url %}{% continue %}{% endif %}
    {% assign is_related = false %}
    {% if page.tags and p.tags %}
    {% for t in page.tags %}
    {% if p.tags contains t %}{% assign is_related = true %}{% break %}{% endif %}
    {% endfor %}
    {% endif %}
    {% if is_related == false and page.categories and p.categories %}
    {% for c in page.categories %}
    {% if p.categories contains c %}{% assign is_related = true %}{% break %}{% endif %}
    {% endfor %}
    {% endif %}
    {% if is_related %}
    {% assign related = related | push: p %}
    {% endif %}
    {% if related.size >= 5 %}{% break %}{% endif %}
    {% endfor %}
    {% if related.size > 0 %}
    <section class="related-posts">
      <h2>相关阅读</h2>
      <ul>
        {% for r in related %}
        <li><a href="{{ r.url | relative_url }}">{{ r.title }}</a> <small>({{ r.date | date: "%Y-%m-%d" }})</small></li>
        {% endfor %}
      </ul>
    </section>
    {% endif %}

    <footer class="post-footer">
      <nav class="post-pager" aria-label="Post Navigation">
        {% if page.previous %}
        <a class="prev" href="{{ page.previous.url | relative_url }}" rel="prev">← 上一篇：{{ page.previous.title }}</a>
        {% endif %}
        {% if page.next %}
        <a class="next" href="{{ page.next.url | relative_url }}" rel="next">下一篇：{{ page.next.title }} →</a>
        {% endif %}
      </nav>
      <div class="share">
        <a href="https://twitter.com/intent/tweet?text={{ page.title | uri_escape }}&url={{ page.url | absolute_url | uri_escape }}"
          target="_blank" rel="noopener">Share to X</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ page.url | absolute_url | uri_escape }}"
          target="_blank" rel="noopener" style="margin-left:12px;">Share to Facebook</a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ page.url | absolute_url | uri_escape }}"
          target="_blank" rel="noopener" style="margin-left:12px;">Share to LinkedIn</a>
      </div>

      {% if site.giscus and site.giscus.repo %}
      <section id="comments" style="margin-top: 24px;">
        <script src="https://giscus.app/client.js" data-repo="{{ site.giscus.repo }}"
          data-repo-id="{{ site.giscus.repo_id }}" data-category="{{ site.giscus.category }}"
          data-category-id="{{ site.giscus.category_id }}" data-mapping="pathname" data-strict="0"
          data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom"
          data-theme="{{ site.giscus.theme | default: 'light' }}" data-lang="zh-CN" crossorigin="anonymous" async>
          </script>
      </section>
      {% endif %}
    </footer>
</article>

<button id="back-to-top" title="回到顶部">↑</button>

<script>
  // 构建目录
  (function () {
    const content = document.getElementById('post-content');
    const toc = document.getElementById('toc');
    if (!content || !toc) return;
    const headings = content.querySelectorAll('h1, h2, h3');
    if (!headings.length) return;
    const ul = document.createElement('ul');
    headings.forEach(h => {
      if (!h.id) h.id = h.textContent.trim().toLowerCase().replace(/\s+/g, '-');
      const li = document.createElement('li');
      li.style.marginLeft = ({ H1: 0, H2: 12, H3: 24 })[h.tagName] + 'px';
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      li.appendChild(a);
      ul.appendChild(li);
    });
    const title = document.createElement('div');
    title.textContent = '目录';
    title.style.fontWeight = 'bold';
    title.style.marginBottom = '8px';
    toc.appendChild(title);
    toc.appendChild(ul);
  })();

  // 代码复制按钮
  (function () {
    document.querySelectorAll('pre > code').forEach(code => {
      const pre = code.parentElement;
      const btn = document.createElement('button');
      btn.textContent = '复制';
      btn.className = 'copy-btn';
      btn.onclick = async () => {
        try { await navigator.clipboard.writeText(code.innerText); btn.textContent = '已复制'; setTimeout(() => btn.textContent = '复制', 1000); } catch (e) { }
      };
      pre.style.position = 'relative';
      btn.style.position = 'absolute';
      btn.style.right = '8px';
      btn.style.top = '8px';
      pre.appendChild(btn);
    });
  })();

  // 回到顶部
  (function () {
    const btn = document.getElementById('back-to-top');
    const onscroll = () => { btn.style.display = window.scrollY > 300 ? 'block' : 'none'; };
    window.addEventListener('scroll', onscroll); onscroll();
    btn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
  })();

  // 图片懒加载与缺失 alt 自动补全
  (function () {
    document.querySelectorAll('#post-content img').forEach(img => {
      img.loading = 'lazy';
      if (!img.hasAttribute('alt') || img.getAttribute('alt') === '') {
        try {
          const u = new URL(img.src, window.location.origin);
          const name = (u.pathname.split('/').pop() || '').split('.')[0];
          if (name) img.setAttribute('alt', decodeURIComponent(name));
        } catch (e) { }
      }
    });
  })();
</script>